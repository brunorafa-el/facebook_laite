<h1><%= @user.name %></h1>

<table>
  <% @user_posts.reverse.each do |post| %>
    <tr>
      <td>
        <%= post.user.name %><br/>
        Posted <%= time_ago_in_words(post.created_at) %> ago
      </td>
    </tr>
    <tr>
      <td><%= post.caption %></td>
    </tr>
    <tr>
      <td><%= link_to image_tag(post.image.url(:large)), post if post.image.exists? %></td>
    </tr>
    <tr>
      <td>
        <%= pluralize(post.likes.count, "Like") %>
        <%= pluralize(post.comments.count, "Comment") %>
      </td>
    </tr>
    <tr>
      <td>
        <%= div_for post do %>
          <%= render partial: "likes/button", locals: { post: post } %>
        <% end %>
        <%= link_to "Comment", post_path(post) %>
        <% if post.user == current_user %>
          <%= link_to 'Edit', edit_post_path(post) %>
          <%= link_to 'Destroy', post, method: :delete, data: { confirm: 'Are you sure?' } %>
        <% end %>
      </td>
    </tr>
  <% end %>
</table>
